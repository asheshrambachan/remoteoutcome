% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rsv_helpers.R
\name{get_sigma2}
\alias{get_sigma2}
\title{Compute variance component sigma-squared}
\usage{
get_sigma2(observations, predictions, theta_init, eps = 0.01)
}
\arguments{
\item{observations}{a data frame containing:
\describe{
  \item{Y}{Outcome variable (binary, NA where not observed)}
  \item{D}{Treatment indicator (binary, NA where not observed)}
  \item{S_e}{Experimental sample indicator (0 or 1)}
  \item{S_o}{Observational sample indicator (0 or 1)}
}}

\item{predictions}{a data frame containing:
\describe{
  \item{Y}{Predicted \eqn{P(Y = 1 \mid R, S_o = 1)}, \eqn{\text{PRED}_Y(R)}}
  \item{D}{Predicted \eqn{P(D = 1 \mid R, S_e = 1)}, \eqn{\text{PRED}_D(R)}}
  \item{S_e}{Predicted \eqn{P(S_e = 1 \mid R)}, \eqn{\text{PRED}_{S_e}(R)}}
  \item{S_o}{Predicted \eqn{P(S_o = 1 \mid R)}, \eqn{\text{PRED}_{S_o}(R)}}
}}

\item{theta_init}{Initial estimate of the treatment effect.}

\item{eps}{Small positive constant for numerical stability (default \code{1e-2}).
Ensures sigma-squared is bounded away from zero.}
}
\value{
A numeric vector of sigma-squared values, one for each observation.
}
\description{
Computes the variance component used in the efficient weight function for
RSV estimation. This is the conditional variance of the efficient influence
function.
}
\keyword{internal}
